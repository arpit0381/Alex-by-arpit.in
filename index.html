<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Alex by Arpit</title>
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css">
    <style>
        :root {
    --bg-color: #f5f7fb;
    --text-color: #333;
    --primary-color: #4e73df;
    --secondary-color: #e3e6f0;
    --bot-message-bg: #f0f2f5;
    --user-message-bg: #d0d9ff;
    --border-color: #e0e3e6;
    --shadow-color: rgba(0, 0, 0, 0.1);
}

[data-theme="dark"] {
    --bg-color: #1a1d21;
    --text-color: #e4e6eb;
    --primary-color: #6c8cff;
    --secondary-color: #3a3b3c;
    --bot-message-bg: #2d3748;
    --user-message-bg: #3f4d85;
    --border-color: #4b4e51;
    --shadow-color: rgba(255, 255, 255, 0.1);
}

* {
    margin: 0;
    padding: 0;
    box-sizing: border-box;
    font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif;
    transition: background-color 0.3s, color 0.3s;
}

body {
    background-color: var(--bg-color);
    color: var(--text-color);
    height: 100vh;
    overflow: hidden;
    width: 100%;
}

.landing-page {
    display: flex;
    flex-direction: column;
    align-items: center;
    justify-content: center;
    height: 100vh;
    position: relative;
    overflow: hidden;
    z-index: 2;
    padding: 1rem;
}

.particles {
    position: absolute;
    width: 100%;
    height: 100%;
    z-index: -1;
}

.particle {
    position: absolute;
    background-color: var(--primary-color);
    border-radius: 50%;
    pointer-events: none;
}

.landing-content {
    text-align: center;
    max-width: 600px;
    width: 100%;
    padding: 2rem;
    background-color: var(--bg-color);
    border-radius: 1rem;
    box-shadow: 0 4px 20px var(--shadow-color);
    backdrop-filter: blur(5px);
    animation: fadeIn 1s ease-out;
}

.title {
    font-size: 2.5rem;
    margin-bottom: 1rem;
    color: var(--primary-color);
    font-weight: 700;
    min-height: 3.5rem;
    word-wrap: break-word;
}

.description {
    margin-bottom: 2rem;
    opacity: 0.9;
    line-height: 1.6;
}

.start-btn {
    padding: 0.8rem 2rem;
    background-color: var(--primary-color);
    color: white;
    border: none;
    border-radius: 2rem;
    font-size: 1.1rem;
    cursor: pointer;
    box-shadow: 0 4px 15px rgba(78, 115, 223, 0.3);
    transition: all 0.3s;
    width: 100%;
    max-width: 250px;
}

.start-btn:hover, .start-btn:active {
    transform: translateY(-2px);
    box-shadow: 0 6px 20px rgba(78, 115, 223, 0.4);
}

.app-container {
    display: flex;
    flex-direction: column;
    height: 100vh;
    width: 100%;
    opacity: 0;
    pointer-events: none;
}

.app-header {
    display: flex;
    justify-content: space-between;
    align-items: center;
    padding: 1rem;
    background-color: var(--primary-color);
    color: white;
    box-shadow: 0 2px 10px var(--shadow-color);
    width: 100%;
}

.logo {
    font-size: 1.3rem;
    font-weight: 700;
    display: flex;
    align-items: center;
    gap: 0.5rem;
}

.controls {
    display: flex;
    gap: 0.5rem;
}

.control-btn {
    background: transparent;
    border: none;
    color: white;
    font-size: 1.1rem;
    cursor: pointer;
    position: relative;
    padding: 0.5rem;
    display: flex;
    align-items: center;
    justify-content: center;
}

.theme-toggle {
    position: relative;
    width: 24px;
    height: 24px;
}

.theme-icon {
    position: absolute;
    top: 0;
    left: 0;
    width: 100%;
    height: 100%;
    transition: opacity 0.3s;
}

.fa-sun {
    opacity: 0;
}

.chat-container {
    flex: 1;
    display: flex;
    flex-direction: column;
    position: relative;
    height: calc(100vh - 69px);
    width: 100%;
}

.chat-body {
    flex: 1;
    padding: 1rem;
    overflow-y: auto;
    display: flex;
    flex-direction: column;
    gap: 1rem;
    -webkit-overflow-scrolling: touch; /* Smooth scrolling for iOS */
}

.message {
    display: flex;
    gap: 0.5rem;
    max-width: 85%;
    animation: messageIn 0.3s;
}

.message.user {
    margin-left: auto;
    flex-direction: row-reverse;
}

.avatar {
    width: 32px;
    height: 32px;
    border-radius: 50%;
    background-color: var(--primary-color);
    display: flex;
    align-items: center;
    justify-content: center;
    color: white;
    flex-shrink: 0;
    font-size: 0.8rem;
}

.message-content {
    padding: 0.8rem;
    border-radius: 1rem;
    box-shadow: 0 2px 5px var(--shadow-color);
    position: relative;
    max-width: calc(100% - 40px);
}

.bot .message-content {
    background-color: var(--bot-message-bg);
    border-bottom-left-radius: 0;
}

.user .message-content {
    background-color: var(--user-message-bg);
    border-bottom-right-radius: 0;
    text-align: right;
}

.message-text {
    line-height: 1.5;
    word-break: break-word;
    font-size: 0.95rem;
}

.timestamp {
    font-size: 0.7rem;
    opacity: 0.6;
    margin-top: 0.5rem;
}

.chat-input-container {
    padding: 0.8rem;
    background-color: var(--bg-color);
    border-top: 1px solid var(--border-color);
    display: flex;
    gap: 0.5rem;
    align-items: center;
    width: 100%;
    position: relative;
}

.chat-input {
    flex: 1;
    padding: 0.8rem 1rem;
    border-radius: 1.5rem;
    border: 1px solid var(--border-color);
    background-color: var(--bg-color);
    color: var(--text-color);
    font-size: 1rem;
    outline: none;
    box-shadow: 0 2px 5px var(--shadow-color);
    -webkit-appearance: none; /* Removes default iOS styling */
}

.send-btn {
    width: 40px;
    height: 40px;
    border-radius: 50%;
    background-color: var(--primary-color);
    color: white;
    border: none;
    display: flex;
    align-items: center;
    justify-content: center;
    cursor: pointer;
    box-shadow: 0 2px 5px var(--shadow-color);
    transition: all 0.2s;
    flex-shrink: 0;
}

.send-btn:hover, .send-btn:active {
    transform: scale(1.05);
}

.thinking {
    display: flex;
    gap: 0.3rem;
    padding: 0.5rem;
}

.dot {
    width: 8px;
    height: 8px;
    border-radius: 50%;
    background-color: var(--primary-color);
    animation: dot-pulse 1.5s infinite ease-in-out;
}

.dot-2 {
    animation-delay: 0.2s;
}

.dot-3 {
    animation-delay: 0.4s;
}

@keyframes dot-pulse {
    0%, 100% {
        opacity: 0.4;
        transform: scale(1);
    }
    50% {
        opacity: 1;
        transform: scale(1.2);
    }
}

@keyframes messageIn {
    from {
        opacity: 0;
        transform: translateY(10px);
    }
    to {
        opacity: 1;
        transform: translateY(0);
    }
}

@keyframes fadeIn {
    from {
        opacity: 0;
        transform: translateY(20px);
    }
    to {
        opacity: 1;
        transform: translateY(0);
    }
}

/* Scrollbar Styling */
::-webkit-scrollbar {
    width: 6px;
}

::-webkit-scrollbar-track {
    background: transparent;
}

::-webkit-scrollbar-thumb {
    background-color: var(--secondary-color);
    border-radius: 3px;
}

/* Media Queries */
@media screen and (max-width: 768px) {
    .message {
        max-width: 90%;
    }
    
    .title {
        font-size: 2rem;
        min-height: auto;
    }
}

@media screen and (max-width: 576px) {
    .landing-content {
        padding: 1.5rem;
        width: calc(100% - 2rem);
    }
    
    .title {
        font-size: 1.8rem;
    }
    
    .app-header {
        padding: 0.8rem;
    }
    
    .logo {
        font-size: 1rem;
    }
    
    .controls {
        gap: 0.3rem;
    }
    
    .control-btn {
        font-size: 1rem;
        padding: 0.3rem;
    }
    
    .chat-body {
        padding: 0.8rem;
    }
    
    .message {
        max-width: 95%;
    }
    
    .avatar {
        width: 28px;
        height: 28px;
    }
    
    .message-content {
        padding: 0.7rem;
        max-width: calc(100% - 32px);
    }
    
    .message-text {
        font-size: 0.9rem;
    }
    
    .chat-input {
        padding: 0.6rem 0.8rem;
        font-size: 0.9rem;
    }
    
    .send-btn {
        width: 36px;
        height: 36px;
    }
}

/* Fix for smaller phone screens */
@media screen and (max-width: 360px) {
    .landing-content {
        padding: 1rem;
    }
    
    .title {
        font-size: 1.5rem;
    }
    
    .description {
        font-size: 0.9rem;
    }
    
    .start-btn {
        padding: 0.7rem 1.5rem;
        font-size: 1rem;
    }
    
    .chat-input-container {
        padding: 0.5rem;
    }
    
    .chat-input {
        padding: 0.5rem 0.7rem;
    }
    
    .send-btn {
        width: 32px;
        height: 32px;
    }
}

/* Fix for portrait/landscape orientation changes */
@media screen and (orientation: landscape) and (max-height: 500px) {
    .landing-content {
        padding: 1rem;
        max-height: 90vh;
        overflow-y: auto;
    }
    
    .title {
        font-size: 1.5rem;
        margin-bottom: 0.5rem;
    }
    
    .description {
        margin-bottom: 1rem;
    }
    
    .avatar {
        width: 24px;
        height: 24px;
    }
    
    .chat-input-container {
        padding: 0.5rem;
    }
}

/* Fix for mobile browsers that show/hide address bar */
html, body {
    height: 100%;
    height: -webkit-fill-available;
}

body {
    min-height: 100vh;
    min-height: -webkit-fill-available;
}

/* Fix for iOS inputs */
input, button, textarea {
    -webkit-appearance: none;
    border-radius: 0;
}

.chat-input {
    border-radius: 1.5rem;
}

/* Fix for iOS momentum scrolling */
.chat-body, .landing-content {
    -webkit-overflow-scrolling: touch;
}

/* Fix for iOS tap highlight color */
* {
    -webkit-tap-highlight-color: transparent;
}

/* Fix for iOS keyboard issues */
@supports (-webkit-touch-callout: none) {
    .chat-container {
        height: -webkit-fill-available;
    }
}
    </style>
</head>
<body>
    <!-- Landing Page -->
    <div class="landing-page">
        <div class="particles"></div>
        <div class="landing-content">
            <h1 class="title">Alex by Arpit</h1>
            <p class="description">Meet Alex, your AI assistant powered by Catalyst Crew. Ask questions, get answers, and explore the world of AI conversation.</p>
            <button class="start-btn">Start Chatting</button>
        </div>
    </div>
    
    <!-- Main App -->
    <div class="app-container">
        <header class="app-header">
            <div class="logo">
                <i class="fas fa-robot"></i>
                <span>Alex</span>
            </div>
            <div class="controls">
                <button class="control-btn clear-chat" title="Clear Chat">
                    <i class="fas fa-trash-alt"></i>
                </button>
                <button class="control-btn theme-toggle" title="Toggle Theme">
                    <i class="fas fa-sun theme-icon"></i>
                    <i class="fas fa-moon theme-icon"></i>
                </button>
            </div>
        </header>
        
        <div class="chat-container">
            <div id="chat-body" class="chat-body">
                <!-- Messages will be added here -->
            </div>
            
            <div class="chat-input-container">
                <input type="text" class="chat-input" placeholder="Type your message here...">
                <button class="send-btn">
                    <i class="fas fa-paper-plane"></i>
                </button>
            </div>
        </div>
    </div>
    
    <script src="https://cdnjs.cloudflare.com/ajax/libs/gsap/3.9.1/gsap.min.js"></script>
    <script>
        // DOM elements
        const landingPage = document.querySelector('.landing-page');
        const appContainer = document.querySelector('.app-container');
        const startBtn = document.querySelector('.start-btn');
        const titleElement = document.querySelector('.title');
        const chatBody = document.getElementById('chat-body');
        const chatInput = document.querySelector('.chat-input');
        const sendBtn = document.querySelector('.send-btn');
        const themeToggle = document.querySelector('.theme-toggle');
        const clearChatBtn = document.querySelector('.clear-chat');
        const sunIcon = document.querySelector('.fa-sun');
        const moonIcon = document.querySelector('.fa-moon');
        
        // Global variables
        let isDarkMode = false;
        let isTypingEffect = false;
        let typingTimeout;
        let previousChat = [];
        
        // Gemini API key - You should use environment variables or a secure backend 
        // in a production environment
        const API_KEY = "AIzaSyBplY0RSE1ESUv6fqWIKcnInIFN-xcqviE"; // Replace with your API key
        const API_URL = "https://generativelanguage.googleapis.com/v1beta/models/gemini-2.0-flash:generateContent";
        
        // Typing effect for title
        function typeEffect(element, text, i = 0, speed = 100) {
            if (!isTypingEffect) return;
            if (i === 0) element.textContent = '';
            
            if (i < text.length) {
                element.textContent += text.charAt(i);
                i++;
                setTimeout(() => typeEffect(element, text, i, speed), speed);
            }
        }

        // Initialize the typing effect
        function initTypingEffect() {
            isTypingEffect = true;
            const text = "Alex by Arpit";
            titleElement.textContent = '';
            setTimeout(() => typeEffect(titleElement, text), 500);
        }

        // Create particles for background
        function createParticles() {
            const particlesContainer = document.querySelector('.particles');
            const particleCount = 30;
            
            for (let i = 0; i < particleCount; i++) {
                const particle = document.createElement('span');
                particle.classList.add('particle');
                
                // Random properties
                const size = Math.random() * 5 + 2;
                const posX = Math.random() * 100;
                const posY = Math.random() * 100;
                const duration = Math.random() * 15 + 10;
                const delay = Math.random() * 5;
                
                particle.style.width = `${size}px`;
                particle.style.height = `${size}px`;
                particle.style.left = `${posX}%`;
                particle.style.top = `${posY}%`;
                particle.style.opacity = Math.random() * 0.5 + 0.1;
                
                // Animation
                gsap.to(particle, {
                    y: 100 + Math.random() * 100,
                    x: posX + (Math.random() * 20 - 10),
                    duration: duration,
                    delay: delay,
                    opacity: 0,
                    repeat: -1,
                    ease: "power1.out"
                });
                
                particlesContainer.appendChild(particle);
            }
        }

        // Start chat from landing page
        function startChat() {
            gsap.to(landingPage, {
                opacity: 0,
                duration: 0.5,
                onComplete: () => {
                    landingPage.style.display = 'none';
                    appContainer.style.opacity = 1;
                    appContainer.style.pointerEvents = 'all';
                    
                    // Load chat history if any
                    loadChatHistory();
                    
                    // Add welcome message if no history
                    if (chatBody.children.length === 0) {
                        setTimeout(() => {
                            addBotMessage("Hello! I'm Alex, your AI assistant powered by Catalyst Crew. How can I help you today?");
                        }, 500);
                    }
                    
                    // Focus on input
                    chatInput.focus();
                }
            });
        }

        // Format timestamp
        function formatTime() {
            const now = new Date();
            let hours = now.getHours();
            const minutes = now.getMinutes().toString().padStart(2, '0');
            const ampm = hours >= 12 ? 'PM' : 'AM';
            hours = hours % 12;
            hours = hours ? hours : 12;
            return `${hours}:${minutes} ${ampm}`;
        }

        // Add user message to chat
        function addUserMessage(text) {
            const messageDiv = document.createElement('div');
            messageDiv.classList.add('message', 'user');
            
            const timestamp = formatTime();
            
            messageDiv.innerHTML = `
                <div class="message-content">
                    <div class="message-text">${text}</div>
                    <div class="timestamp">${timestamp}</div>
                </div>
                <div class="avatar">
                    <i class="fas fa-user"></i>
                </div>
            `;
            
            chatBody.appendChild(messageDiv);
            scrollToBottom();
            
            // Play send sound
            playSound('send');
            
            // Save to history
            previousChat.push({role: 'user', content: text, time: timestamp});
            saveChatHistory();
        }

        // Add bot message to chat
        function addBotMessage(text) {
            const messageDiv = document.createElement('div');
            messageDiv.classList.add('message', 'bot');
            
            const timestamp = formatTime();
            
            messageDiv.innerHTML = `
                <div class="avatar">
                    <i class="fas fa-robot"></i>
                </div>
                <div class="message-content">
                    <div class="message-text"></div>
                    <div class="timestamp">${timestamp}</div>
                </div>
            `;
            
            chatBody.appendChild(messageDiv);
            
            // Typing animation for bot
            const messageText = messageDiv.querySelector('.message-text');
            let i = 0;
            const typingSpeed = 15; // milliseconds per character
            
            function typeWriter() {
                if (i < text.length) {
                    messageText.innerHTML += text.charAt(i);
                    i++;
                    scrollToBottom();
                    setTimeout(typeWriter, typingSpeed);
                }
            }
            
            setTimeout(() => {
                // Play receive sound
                playSound('receive');
                typeWriter();
            }, 500);
            
            scrollToBottom();
            
            // Save to history
            previousChat.push({role: 'assistant', content: text, time: timestamp});
            saveChatHistory();
        }

        // Show bot is typing indication
        function showBotTyping() {
            const typingDiv = document.createElement('div');
            typingDiv.classList.add('message', 'bot', 'typing-indicator');
            
            typingDiv.innerHTML = `
                <div class="avatar">
                    <i class="fas fa-robot"></i>
                </div>
                <div class="message-content">
                    <div class="thinking">
                        <div class="dot dot-1"></div>
                        <div class="dot dot-2"></div>
                        <div class="dot dot-3"></div>
                    </div>
                </div>
            `;
            
            chatBody.appendChild(typingDiv);
            scrollToBottom();
            
            return typingDiv;
        }

        // Remove typing indicator
        function removeTypingIndicator() {
            const typingIndicator = document.querySelector('.typing-indicator');
            if (typingIndicator) {
                typingIndicator.remove();
            }
        }

        // Process user input
        async function processUserInput() {
            const message = chatInput.value.trim();
            
            if (message === '') return;
            
            // Clear input
            chatInput.value = '';
            
            // Add user message
            addUserMessage(message);
            
            // Show typing indicator
            const typingIndicator = showBotTyping();
            
            try {
                // Call Gemini API
                const response = await callGeminiAPI(message);
                
                // Remove typing indicator
                removeTypingIndicator();
                
                // Add bot response
                addBotMessage(response);
            } catch (error) {
                // Remove typing indicator
                removeTypingIndicator();
                
                // Show error message
                addBotMessage("I apologize, but I encountered an error. Please try again.");
                console.error("Error:", error);
            }
        }

        // Call Gemini API
        async function callGeminiAPI(message) {
            try {
                // Format the conversation history to include in the request
                const conversationHistory = previousChat.map(msg => ({
                    role: msg.role === 'user' ? 'user' : 'model',
                    parts: [{ text: msg.content }]
                }));
                
                // Add current message
                conversationHistory.push({
                    role: 'user',
                    parts: [{ text: message }]
                });
                
                // Prepare request body
                const requestBody = {
                    contents: conversationHistory,
                    generationConfig: {
                        temperature: 0.7,
                        maxOutputTokens: 800,
                    }
                };
                
                // Make API request
                const response = await fetch(`${API_URL}?key=${API_KEY}`, {
                    method: 'POST',
                    headers: {
                        'Content-Type': 'application/json'
                    },
                    body: JSON.stringify(requestBody)
                });
                
                if (!response.ok) {
                    throw new Error(`HTTP error! Status: ${response.status}`);
                }
                
                const data = await response.json();
                
                // Extract text from response
                if (data.candidates && data.candidates[0] && 
                    data.candidates[0].content && 
                    data.candidates[0].content.parts && 
                    data.candidates[0].content.parts[0]) {
                    return data.candidates[0].content.parts[0].text;
                } else {
                    // Fallback response if format is unexpected
                    return "I couldn't process that request. Please try again.";
                }
            } catch (error) {
                console.error("API Error:", error);
                // Fallback to mock response if API fails
                return mockGeminiResponse(message);
            }
        }

        // Mock Gemini API response (fallback if API fails or for testing)
        function mockGeminiResponse(message) {
            // This function simulates an API response
            const responses = [
                "I'm Alex, your AI assistant powered by Google Gemini. How can I help you today?",
                "That's an interesting question! Let me think about it...",
                "Based on my understanding, I think the answer is quite complex.",
                "I'd be happy to assist you with that request!",
                "Thanks for sharing that with me. Would you like to know more?",
                "I'm designed to provide helpful, accurate, and safe responses to your questions.",
                "I don't have personal opinions, but I can provide information about that topic.",
                "That's a great question! Here's what I know about it.",
                "Let me search my knowledge to give you the best answer possible."
            ];
            
            let response;
            
            // Personalized responses based on message content
            if (message.toLowerCase().includes("hello") || message.toLowerCase().includes("hi")) {
                response = "Hello! It's nice to meet you. How can I assist you today?";
            } else if (message.toLowerCase().includes("how are you")) {
                response = "I'm functioning perfectly! Thanks for asking. How about you?";
            } else if (message.toLowerCase().includes("thank")) {
                response = "You're very welcome! Is there anything else you'd like help with?";
            } else if (message.toLowerCase().includes("help")) {
                response = "I'm here to help! Feel free to ask me any questions, and I'll do my best to assist you.";
            } else if (message.toLowerCase().includes("who are you")) {
                response = "I'm Alex, an AI assistant created by Arpit and powered by Google Gemini. I'm designed to be helpful, harmless, and honest in all my interactions.";
            } else if (message.toLowerCase().includes("capabilities") || message.toLowerCase().includes("can you do")) {
                response = "I can answer questions, provide information, have conversations, assist with tasks, and much more. What would you like to know?";
            } else {
                // Random response if no specific pattern matched
                response = responses[Math.floor(Math.random() * responses.length)];
            }
            
            return response;
        }

        // Scroll to bottom of chat
        function scrollToBottom() {
            chatBody.scrollTop = chatBody.scrollHeight;
        }

        // Play sound effects
        function playSound(type) {
            // This is a placeholder for sound implementation
            // You would need to add audio files and implementation
            // console.log(`Playing ${type} sound`);
        }

        // Toggle dark/light mode
        function toggleTheme() {
            isDarkMode = !isDarkMode;
            
            if (isDarkMode) {
                document.body.setAttribute('data-theme', 'dark');
                gsap.to(moonIcon, {opacity: 0, duration: 0.3});
                gsap.to(sunIcon, {opacity: 1, duration: 0.3});
            } else {
                document.body.removeAttribute('data-theme');
                gsap.to(sunIcon, {opacity: 0, duration: 0.3});
                gsap.to(moonIcon, {opacity: 1, duration: 0.3});
            }
            
            // Save theme preference
            localStorage.setItem('theme', isDarkMode ? 'dark' : 'light');
        }

        // Save chat history to local storage
        function saveChatHistory() {
            localStorage.setItem('chatHistory', JSON.stringify(previousChat));
        }

        // Load chat history from local storage
        function loadChatHistory() {
            const storedChat = localStorage.getItem('chatHistory');
            
            if (storedChat) {
                previousChat = JSON.parse(storedChat);
                
                // Add messages from history
                previousChat.forEach(message => {
                    if (message.role === 'user') {
                        const messageDiv = document.createElement('div');
                        messageDiv.classList.add('message', 'user');
                        
                        messageDiv.innerHTML = `
                            <div class="message-content">
                                <div class="message-text">${message.content}</div>
                                <div class="timestamp">${message.time}</div>
                            </div>
                            <div class="avatar">
                                <i class="fas fa-user"></i>
                            </div>
                        `;
                        
                        chatBody.appendChild(messageDiv);
                    } else {
                        const messageDiv = document.createElement('div');
                        messageDiv.classList.add('message', 'bot');
                        
                        messageDiv.innerHTML = `
                            <div class="avatar">
                                <i class="fas fa-robot"></i>
                            </div>
                            <div class="message-content">
                                <div class="message-text">${message.content}</div>
                                <div class="timestamp">${message.time}</div>
                            </div>
                        `;
                        
                        chatBody.appendChild(messageDiv);
                    }
                });
                
                setTimeout(() => {
                    scrollToBottom();
                }, 100);
            }
        }

        // Clear chat history
        function clearChat() {
            // Ask for confirmation
            if (previousChat.length > 0 && confirm('Are you sure you want to clear the chat history?')) {
                chatBody.innerHTML = '';
                previousChat = [];
                localStorage.removeItem('chatHistory');
                
                // Add welcome message
                setTimeout(() => {
                    addBotMessage("Chat cleared. How can I help you today?");
                }, 300);
            }
        }

        // Event listeners
        window.addEventListener('DOMContentLoaded', () => {
            // Initialize the landing page elements
            initTypingEffect();
            createParticles();
            
            // Load theme preference
            const storedTheme = localStorage.getItem('theme');
            if (storedTheme === 'dark') {
                isDarkMode = true;
                document.body.setAttribute('data-theme', 'dark');
                gsap.to(moonIcon, {opacity: 0, duration: 0});
                gsap.to(sunIcon, {opacity: 1, duration: 0});
            } else {
                isDarkMode = false;
                document.body.removeAttribute('data-theme');
                gsap.to(sunIcon, {opacity: 0, duration: 0});
                gsap.to(moonIcon, {opacity: 1, duration: 0});
            }
        });

        // Start chat button
        startBtn.addEventListener('click', startChat);

        // Send message on button click
        sendBtn.addEventListener('click', processUserInput);

        // Send message on pressing Enter
        chatInput.addEventListener('keypress', (e) => {
            if (e.key === 'Enter') {
                processUserInput();
            }
        });

        // Toggle theme
        themeToggle.addEventListener('click', toggleTheme);

        // Clear chat
        clearChatBtn.addEventListener('click', clearChat);
    </script>
</body>
</html>
